---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```
# stlcsb <img src="man/figures/csbLogo.png" align="right" />

[![lifecycle](https://img.shields.io/badge/lifecycle-maturing-blue.svg)](https://www.tidyverse.org/lifecycle/#maturing)
[![Travis-CI Build Status](https://travis-ci.org/slu-openGIS/stlcsb.svg?branch=master)](https://travis-ci.org/slu-openGIS/stlcsb)
[![AppVeyor Build Status](https://ci.appveyor.com/api/projects/status/github/slu-openGIS/stlcsb?branch=master&svg=true)](https://ci.appveyor.com/project/chris-prener/stlcsb)
[![Coverage status](https://codecov.io/gh/slu-openGIS/stlcsb/branch/master/graph/badge.svg)](https://codecov.io/github/slu-openGIS/stlcsb?branch=master)
[![CRAN\_Status\_Badge](http://www.r-pkg.org/badges/version/stlcsb)](https://cran.r-project.org/package=stlcsb)

The goal of `stlcsb` is to provide access to data from the City of St. Louis [Citizensâ€™ Service Bureau](https://www.stlouis-mo.gov/government/departments/public-safety/neighborhood-stabilization-office/citizens-service-bureau/index.cfm) (CSB), the [3-1-1 service](https://en.wikipedia.org/wiki/3-1-1) for the City of Saint Louis. Residents can contact the number with non-emergency service requests, and the CSB will dispatch these requests to the appropriate City agency. `stlcsb` also includes functions for cleaning and manipulating these data.

## Installation
### Installing Dependencies
You should check the [`sf` package website](https://r-spatial.github.io/sf/) and the [`stlcsb` package website](https://slu-openGIS.github.io/stlcsb/) for the latest details on installing dependencies for that package. Instructions vary significantly by operating system. For best results, have `sf` installed before you install `stlcsb`. Other dependencies, like `dplyr`, will be installed automatically with `stlcsb` if they are not already present.

### Installing stlcsb
The development version of `stlcsb` can be accessed from GitHub with `remotes`:

```r
# install.packages("remotes")
remotes::install_github("slu-openGIS/stlcsb")
```

## Example Usage 

`stlcsb` is used for simplified acquisition and processing of St. Louis CSB Data. In the following example, data is downloaded, filtered, projected to an sf object, and mapped using `ggplot2`.

```{r example, eval=FALSE}

csb <- csb_get_data(year = 2017)

csb_filter(csb, problemcode, cat_waste) %>%
  csb_missingXY(srx, sry, missing) %>%
  dplyr::filter(missing == FALSE) %>%
  csb_projectXY(srx, sry, crs = 4269) -> waste_2017

ggplot() +
  geom_sf(data = stlBoundary) +
  geom_sf(data = waste_2017)
```
<img src="man/figures/waste_example.png" align="center" />

## Contributor Code of Conduct
Please note that this project is released with a [Contributor Code of Conduct](.github/CODE_OF_CONDUCT.md). By participating in this project you agree to abide by its terms.
